<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@azure/event-hubs</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@azure/event-hubs</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @azure/event-hubs</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#azure-event-hubs-client-library-for-javascript" id="azure-event-hubs-client-library-for-javascript" style="color: inherit; text-decoration: none;">
					<h1>Azure Event Hubs client library for Javascript</h1>
				</a>
				<p>Azure Event Hubs is a highly scalable publish-subscribe service that can ingest millions of events per second and stream them to multiple consumers. This lets you process and analyze the massive amounts of data produced by your connected devices and applications. If you would like to know more about Azure Event Hubs, you may wish to review: <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-about">What is Event Hubs</a>?</p>
				<p>The Azure Event Hubs client library allows you to send and receive events in your Node.js application.</p>
				<p><a href="https://github.com/Azure/azure-sdk-for-js/tree/master/sdk/eventhub/event-hubs">Source code</a> | <a href="https://www.npmjs.com/package/@azure/event-hubs">Package (npm)</a> | <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/index.html">API Reference Documentation</a> | <a href="https://azure.microsoft.com/en-us/services/event-hubs/">Product documentation</a> | <a href="https://github.com/Azure/azure-sdk-for-js/tree/master/sdk/eventhub/event-hubs/samples">Samples</a></p>
				<p><strong>NOTE</strong>: If you are using version 2.1.0 or lower, then please use the below links instead</p>
				<p><a href="https://github.com/Azure/azure-sdk-for-js/tree/%40azure/event-hubs_2.1.0/sdk/eventhub/event-hubs">Source code for v2.1.0</a> | <a href="https://www.npmjs.com/package/@azure/event-hubs/v/2.1.0">Package for v2.1.0 (npm)</a> | <a href="https://github.com/Azure/azure-sdk-for-js/tree/%40azure/event-hubs_2.1.0/sdk/eventhub/event-hubs/samples">Samples for v2.1.0</a></p>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting Started</h2>
				</a>
				<a href="#install-the-package" id="install-the-package" style="color: inherit; text-decoration: none;">
					<h3>Install the package</h3>
				</a>
				<p>Install the Azure Event Hubs client library using npm</p>
				<p><code>npm install @azure/event-hubs@next</code></p>
				<p><strong>Prerequisites</strong>: You must have an <a href="https://azure.microsoft.com/free/">Azure subscription</a> and a
					<a href="https://docs.microsoft.com/en-us/azure/event-hubs/">Event Hubs Namespace</a> to use this package.
				If you are using this package in a Node.js application, then use Node.js 8.x or higher.</p>
				<a href="#configure-typescript" id="configure-typescript" style="color: inherit; text-decoration: none;">
					<h3>Configure Typescript</h3>
				</a>
				<p>TypeScript users need to have Node type definitions installed:</p>
				<pre><code class="language-bash">npm install @types/node</code></pre>
				<p>You also need to enable <code>compilerOptions.allowSyntheticDefaultImports</code> in your tsconfig.json. Note that if you have enabled <code>compilerOptions.esModuleInterop</code>, <code>allowSyntheticDefaultImports</code> is enabled by default. See <a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html">TypeScript&#39;s compiler options handbook</a> for more information.</p>
				<a href="#key-concepts" id="key-concepts" style="color: inherit; text-decoration: none;">
					<h3>Key concepts</h3>
				</a>
				<ul>
					<li><p>An <strong>Event Hub client</strong> is the primary interface for developers interacting with the Event Hubs client library, allowing for inspection of Event Hub metadata and providing a guided experience towards specific Event Hub operations such as the creation of producers and consumers.</p>
					</li>
					<li><p>An <strong>Event Hub producer</strong> is a source of telemetry data, diagnostics information, usage logs, or other log data, as part of an embedded device solution, a mobile device application, a game title running on a console or other device, some client or server based business solution, or a web site.</p>
					</li>
					<li><p>An <strong>Event Hub consumer</strong> picks up such information from the Event Hub and processes it. Processing may involve aggregation, complex computation and filtering. Processing may also involve distribution or storage of the information in a raw or transformed fashion. Event Hub consumers are often robust and high-scale platform infrastructure parts with built-in analytics capabilities, like Azure Stream Analytics, Apache Spark, or Apache Storm.</p>
					</li>
					<li><p>A <strong>partition</strong> is an ordered sequence of events that is held in an Event Hub. Partitions are a means of data organization associated with the parallelism required by event consumers. Azure Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream. As newer events arrive, they are added to the end of this sequence. The number of partitions is specified at the time an Event Hub is created and cannot be changed.</p>
					</li>
					<li><p>A <strong>consumer group</strong> is a view of an entire Event Hub. Consumer groups enable multiple consuming applications to each have a separate view of the event stream, and to read the stream independently at their own pace and from their own position. There can be at most 5 concurrent readers on a partition per consumer group; however it is recommended that there is only one active consumer for a given partition and consumer group pairing. Each active reader receives all of the events from its partition; If there are multiple readers on the same partition, then they will receive duplicate events.</p>
					</li>
				</ul>
				<p>For more concepts and deeper discussion, see: <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-features">Event Hubs Features</a></p>
				<a href="#authenticate-the-client" id="authenticate-the-client" style="color: inherit; text-decoration: none;">
					<h3>Authenticate the client</h3>
				</a>
				<p>Interaction with Event Hubs starts with an instance of the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubclient.html#constructor">EventHubClient</a> class. You can instantiate
				this class using one of the below</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"my-connection-string"</span>, <span class="hljs-string">"my-event-hub"</span>);</code></pre>
				<ul>
					<li>This constructor takes the connection string of the form &#39;Endpoint=sb://my-servicebus-namespace.servicebus.windows.net/;SharedAccessKeyName=my-SA-name;SharedAccessKey=my-SA-key;&#39; and entity name to your Event Hub instance. You can get the connection string from the <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-get-connection-string#get-connection-string-from-the-portal">Azure portal</a>.</li>
				</ul>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"my-connection-string-with-entity-path"</span>);</code></pre>
				<ul>
					<li>The <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-get-connection-string#get-connection-string-from-the-portal">connection string from the Azure Portal</a> is for the entire Event Hubs namespace and will not contain the path to the desired Event Hub instance which is needed for this constructor overload. In this case, the path can be added manually by adding &quot;;EntityPath=[[ EVENT HUB NAME ]]&quot; to the end of the connection string. For example, &quot;;EntityPath=my-event-hub-name&quot;.</li>
				</ul>
				<p>If you have defined a shared access policy directly on the Event Hub itself, then copying the connection string from that Event Hub will result in a connection string that contains the path.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> { DefaultAzureCredential } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@azure/identity"</span>);
<span class="hljs-keyword">const</span> credential = <span class="hljs-keyword">new</span> DefaultAzureCredential();
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"my-host-name"</span>, <span class="hljs-string">"my-event-hub"</span>, credential);</code></pre>
				<ul>
					<li>This constructor takes the host name and entity name of your Event Hub instance and credential that implements the TokenCredential interface. There are implementations of the <code>TokenCredential</code> interface available in the <a href="https://www.npmjs.com/package/@azure/identity">@azure/identity</a> package. The host name is of the format <code>&lt;yournamespace&gt;.servicebus.windows.net</code>.</li>
				</ul>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h3>Examples</h3>
				</a>
				<p>The following sections provide code snippets that cover some of the common tasks using Azure Event Hubs</p>
				<ul>
					<li><a href="#inspect-an-event-hub">Inspect an Event Hub</a></li>
					<li><a href="#publish-events-to-an-event-hub">Publish events to an Event Hub</a></li>
					<li><a href="#consume-events-from-an-event-hub-partition">Consume events from an Event Hub partition</a></li>
					<li><a href="#consume-events-using-an-event-processor">Consume events using an Event Processor</a></li>
					<li><a href="#use-eventHubClient-to-work-with-IotHub">Use EventHubClient to work with IotHub</a></li>
				</ul>
				<a href="#inspect-an-event-hub" id="inspect-an-event-hub" style="color: inherit; text-decoration: none;">
					<h3>Inspect an Event Hub</h3>
				</a>
				<p>Many Event Hub operations take place within the scope of a specific partition.
					Because partitions are owned by the Event Hub, their names are assigned at the time of creation.
				To understand what partitions are available, you query the Event Hub using the client.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubCLient(<span class="hljs-string">"connectionString"</span>, <span class="hljs-string">"eventHubName"</span>);
<span class="hljs-keyword">const</span> partitionIds = <span class="hljs-keyword">await</span> client.getPartitionIds();</code></pre>
				<a href="#publish-events-to-an-event-hub" id="publish-events-to-an-event-hub" style="color: inherit; text-decoration: none;">
					<h3>Publish events to an Event Hub</h3>
				</a>
				<p>In order to publish events, you&#39;ll need to create an <code>EventHubProducer</code>. Producers may be dedicated to a specific partition, or allow the Event Hubs service to decide which partition events should be published to. It is recommended to use automatic routing when the publishing of events needs to be highly available or when event data should be distributed evenly among the partitions. In the below examples, we will take advantage of automatic routing.</p>
				<a href="#send-a-single-event-or-an-array-of-events" id="send-a-single-event-or-an-array-of-events" style="color: inherit; text-decoration: none;">
					<h4>Send a single event or an array of events</h4>
				</a>
				<p>Use the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubproducer.html#send">send</a> method to send a single event or multiple events using a single call.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"connectionString"</span>, <span class="hljs-string">"eventHubName"</span>);
<span class="hljs-keyword">const</span> producer = client.createProducer();
<span class="hljs-keyword">await</span> producer.send({ <span class="hljs-attr">body</span>: <span class="hljs-string">"my-event-body"</span> });
<span class="hljs-keyword">await</span> producer.send([{ <span class="hljs-attr">body</span>: <span class="hljs-string">"foo"</span> }, { <span class="hljs-attr">body</span>: <span class="hljs-string">"bar"</span> }]);</code></pre>
				<a href="#send-a-batch-of-events" id="send-a-batch-of-events" style="color: inherit; text-decoration: none;">
					<h4>Send a batch of events</h4>
				</a>
				<p>Use the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubproducer.html#createbatch">createBatch</a> method to create
					an <code>EventDataBatch</code> object which can then be sent using the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubproducer.html#send">send</a> method.
					Events may be added to the <code>EventDataBatch</code> using the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventdatabatch.html#tryadd">tryAdd</a>
				method until the maximum batch size limit in bytes has been reached.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"connectionString"</span>, <span class="hljs-string">"eventHubName"</span>);
<span class="hljs-keyword">const</span> producer = client.createProducer();
<span class="hljs-keyword">const</span> eventDataBatch = <span class="hljs-keyword">await</span> producer.createBatch();
<span class="hljs-keyword">let</span> wasAdded = eventDataBatch.tryAdd({ <span class="hljs-attr">body</span>: <span class="hljs-string">"my-event-body"</span> });
wasAdded = eventDataBatch.tryAdd({ <span class="hljs-attr">body</span>: <span class="hljs-string">"my-event-body-2"</span> });
<span class="hljs-keyword">await</span> producer.send(eventDataBatch);</code></pre>
				<p>The <a href="#inspect-an-event-hub">Inspect an Event Hub</a> example shows how to get the list of partition ids should you wish to specify one for a producer.</p>
				<p>The <code>createProducer</code> method takes an optional parameter of type <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/interfaces/eventhubproduceroptions.html">EventHubProducerOptions</a> which you can use to specify the retry options and partition id for the send operation.</p>
				<p>The <code>send</code> method takes an optional parameter of type <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/interfaces/sendoptions.html">SendOptions</a> which you can use to specify <code>abortSignal</code> to cancel current operation.
					You can also specify <code>partitionKey</code> if you did not specify a partition id when creating the producer.
				All events that use the same partition key will be sent to the same partition.</p>
				<p><strong>Note</strong>: When working with Azure Stream Analytics, the body of the event being sent should be a JSON object as well.
				For example: <code>body: { &quot;message&quot;: &quot;Hello World&quot; }</code></p>
				<a href="#consume-events-from-an-event-hub-partition" id="consume-events-from-an-event-hub-partition" style="color: inherit; text-decoration: none;">
					<h3>Consume events from an Event Hub partition</h3>
				</a>
				<p>To consume events from a single Event Hub partition in a consumer group, create an <code>EventHubConsumer</code> for that partition and consumer group combination. You will need to provide a position in the event stream from where to begin receiving events; in our example, we will read new events as they are published.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"connectionString"</span>, <span class="hljs-string">"eventHubName"</span>);
<span class="hljs-keyword">const</span> consumer = client.createConsumer(
  EventHubClient.defaultConsumerGroupName,
  partitionIds[<span class="hljs-number">0</span>],
  EventPosition.latest()
);</code></pre>
				<p>The <a href="#inspect-an-event-hub">Inspect an Event Hub</a> example shows how to get the list of partition ids.</p>
				<p>The <code>createConsumer</code> method takes an optional parameter of type <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/interfaces/eventhubconsumeroptions.html">EventHubConsumerOptions</a> which you can use to specify the ownerLevel, the level that this consumer is currently using for partition ownership. If another consumer is currently active for the same partition with no or lower level, then it will get disconnected. If another consumer is currently active with a higher level, then this consumer will fail to connect. You can also specify retryOptions for the receive operation on the consumer.</p>
				<p>You can use this consumer in one of 3 ways to receive events:</p>
				<ul>
					<li><a href="#get-an-array-of-events">Get an array of events</a></li>
					<li><a href="#register-event-handler">Register event handler</a></li>
					<li><a href="#use-async-iterator">Use async iterator</a></li>
				</ul>
				<a href="#get-an-array-of-events" id="get-an-array-of-events" style="color: inherit; text-decoration: none;">
					<h4>Get an array of events</h4>
				</a>
				<p>Use the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubconsumer.html#receivebatch">receiveBatch</a> function which returns a promise that resolves to an array of events.</p>
				<p>This function takes an optional parameter called <code>abortSignal</code> to cancel current operation.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> maxMessageCount = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> myEvents = <span class="hljs-keyword">await</span> consumer.receiveBatch(maxMessageCount);</code></pre>
				<a href="#register-event-handler" id="register-event-handler" style="color: inherit; text-decoration: none;">
					<h4>Register event handler</h4>
				</a>
				<p>Use the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubconsumer.html#receive">receive</a> to set up event handlers and have it running as long as you need.</p>
				<p>This function takes an optional parameter called <code>abortSignal</code> to cancel current operation.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> myEventHandler = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// your code here</span>
};
<span class="hljs-keyword">const</span> myErrorHandler = <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-comment">// your error handler here</span>
};
<span class="hljs-keyword">const</span> receiveHandler = consumer.receive(myEventHandler, myErrorHandler);

<span class="hljs-comment">// When ready to stop receiving</span>
<span class="hljs-keyword">await</span> receiveHandler.stop();</code></pre>
				<a href="#use-async-iterator" id="use-async-iterator" style="color: inherit; text-decoration: none;">
					<h4>Use async iterator</h4>
				</a>
				<p>Use the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubconsumer.html#geteventiterator">getMessageIterator</a> to get an async iterator over events.</p>
				<p>This function takes an optional <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/interfaces/eventiteratoroptions.html">EventIteratorOptions</a> parameter that includes <code>abortSignal</code> to cancel the current operation.</p>
				<pre><code class="language-javascript"><span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> events <span class="hljs-keyword">of</span> consumer.getEventIterator()){
  <span class="hljs-comment">// your code here</span>
}</code></pre>
				<a href="#consume-events-using-an-event-processor" id="consume-events-using-an-event-processor" style="color: inherit; text-decoration: none;">
					<h3>Consume events using an Event Processor</h3>
				</a>
				<p><a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventprocessor.html">EventProcessor</a> is a high level construct which internally uses the <code>EventHubConsumer</code> which is mentioned in previous examples
				to receive events from multiple partitions at once.</p>
				<p>Typically, Event Processor based applications consist of one or more instances of EventProcessor instances which have been
					configured to consume events from the same Event Hub and consumer group. They balance the
					workload across different instances by distributing the partitions to be processed among themselves.
				They also allow the user to track progress when events are processed using checkpoints.</p>
				<p>The <code>EventProcessor</code> will delegate the processing of events to a <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/interfaces/partitionprocessor.html">PartitionProcessor</a>
					that you provide, allowing you to focus on business logic while the <code>EventProcessor</code> holds responsibility for managing the underlying consumer
				operations including checkpointing and load balancing.</p>
				<p>A checkpoint is meant to represent the last successfully processed event by the user from a particular
					partition of a consumer group in an Event Hub instance. The <code>EventProcessor</code> uses an instance of <code>PartitionManager</code>
					to update checkpoints and to store the relevant information required by the load balancing algorithm.
					While for the purposes of getting started you can use the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/inmemorypartitionmanager.html">InMemoryPartitionManager</a> that is shipped out of the box from this library,
					it is recommended to use a peristent store when running in production.
				Search npm with the prefix <code>@azure/eventhubs-checkpointstore-</code> to find packages that support this and use the <code>PartitionManager</code> implementation from one such package.</p>
				<p>In the below example, we create two instances of EventProcessor against the same Event Hub and consumer group,
				using an <code>InMemoryPartitionManager</code>.</p>
				<pre><code class="language-javascript"><span class="hljs-comment">// Your Partition Processor where you override the `processEvents` method to include your</span>
<span class="hljs-comment">// business logic for processing events.</span>
<span class="hljs-comment">// You may choose to also override other methods like `initialize`, `close`, `processError` as you see fit</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SamplePartitionProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PartitionProcessor</span> </span>{
  <span class="hljs-comment">/**
   * Gets called for each batch of events that are received.
   * @param events Array of events recieved
   * @param partitionContext Instance of class `PartitionContext` that holds information about the current
   * partition, event hub, consumer group and the method `updateCheckpoint` for you to checkpoint an event.
   */</span>
  <span class="hljs-keyword">async</span> processEvents(events, partitionContext) {
    <span class="hljs-comment">/* your code here */</span>
  }
}

<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> EventHubClient(<span class="hljs-string">"my-connection-string"</span>, <span class="hljs-string">"my-event-hub"</span>);
<span class="hljs-keyword">const</span> partitionManager = <span class="hljs-keyword">new</span> InMemoryPartitionManager();
<span class="hljs-keyword">const</span> processor1 = <span class="hljs-keyword">new</span> EventProcessor(
  EventHubClient.defaultConsumerGroupName,
  client,
  SamplePartitionProcessor,
  partitionManager
);
<span class="hljs-keyword">const</span> processor2 = <span class="hljs-keyword">new</span> EventProcessor(
  EventHubClient.defaultConsumerGroupName,
  client,
  SamplePartitionProcessor,
  partitionManager
);
<span class="hljs-keyword">await</span> processor1.start();
<span class="hljs-keyword">await</span> processor2.start();
<span class="hljs-comment">// At this point, both processors are consuming events from different partitions of the Event Hub and</span>
<span class="hljs-comment">// delegating them to the SamplePartitionProcessor instance created for that partition.</span>
<span class="hljs-comment">// This processing takes place in the background and will not block.</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// In this example, we'll stop processing after thirty seconds.</span>
<span class="hljs-keyword">await</span> delay(<span class="hljs-number">30000</span>);
<span class="hljs-keyword">await</span> processor1.stop();
<span class="hljs-keyword">await</span> processor2.stop();</code></pre>
				<p>To control the number of events passed to processEvents, use the options argument in the EventProcessor constructor.</p>
				<p><strong>Note</strong>: In this model, you are responsible for closing the <code>EventHubClient</code> instance to dispose it.</p>
				<a href="#use-eventhubclient-to-work-with-iothub" id="use-eventhubclient-to-work-with-iothub" style="color: inherit; text-decoration: none;">
					<h3>Use EventHubClient to work with IotHub</h3>
				</a>
				<p>You can use <code>EventHubClient</code> to work with IotHub as well. This is useful for receiving telemetry data of IotHub from the linked EventHub.
				Most likely the associated connection string will not have send claims. Hence getting HubRuntimeInfo or PartitionRuntimeInfo and receiving events would be the possible operations.</p>
				<ul>
					<li>Please notice that we are awaiting on the <a href="https://azure.github.io/azure-sdk-for-js/event-hubs/classes/eventhubclient.html#createfromiothubconnectionstring">createFromIotHubConnectionString</a> method to get an instance of the EventHubClient. This is different from other static methods on the client. The method talks to the IotHub endpoint to get a redirect error which contains the EventHub endpoint to talk to. It then constructs the right EventHub connection string based on the information in the redirect error and returns an instance of the EventHubClient that you can play with.</li>
				</ul>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">await</span> EventHubClient.createFromIotHubConnectionString(<span class="hljs-string">"connectionString"</span>);
<span class="hljs-keyword">await</span> client.getProperties();
<span class="hljs-keyword">await</span> client.getPartitionProperties(<span class="hljs-string">"partitionId"</span>);</code></pre>
				<p><strong>Notes:</strong> For scalable and efficient receiving, please take a look at <a href="https://github.com/Azure/azure-sdk-for-js/tree/master/sdk/eventhub/event-processor-host">azure-event-processor-host</a>. The Event Processor host, internally uses the streaming receiver to receive events.</p>
				<a href="#troubleshooting" id="troubleshooting" style="color: inherit; text-decoration: none;">
					<h2>Troubleshooting</h2>
				</a>
				<a href="#amqp-dependencies" id="amqp-dependencies" style="color: inherit; text-decoration: none;">
					<h3>AMQP Dependencies</h3>
				</a>
				<p>The Event Hubs library depends on the <a href="https://github.com/amqp/rhea-promise">rhea-promise</a> library for managing connections, sending and receiving events over the <a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-complete-v1.0-os.pdf">AMQP</a> protocol.</p>
				<a href="#enable-logs" id="enable-logs" style="color: inherit; text-decoration: none;">
					<h3>Enable logs</h3>
				</a>
				<p>You can set the following environment variable to get the debug logs when using this library.</p>
				<ul>
					<li>Getting debug logs from the Event Hubs SDK</li>
				</ul>
				<pre><code class="language-bash"><span class="hljs-built_in">export</span> DEBUG=azure*</code></pre>
				<ul>
					<li>Getting debug logs from the Event Hubs SDK and the protocol level library.</li>
				</ul>
				<pre><code class="language-bash"><span class="hljs-built_in">export</span> DEBUG=azure*,rhea*</code></pre>
				<ul>
					<li>If you are <strong>not interested in viewing the event transformation</strong> (which consumes lot of console/disk space) then you can set the <code>DEBUG</code> environment variable as follows:</li>
				</ul>
				<pre><code class="language-bash"><span class="hljs-built_in">export</span> DEBUG=azure*,rhea*,-rhea:raw,-rhea:message,-azure:amqp-common:datatransformer</code></pre>
				<ul>
					<li>If you are interested only in <strong>errors</strong>, then you can set the <code>DEBUG</code> environment variable as follows:</li>
				</ul>
				<pre><code class="language-bash"><span class="hljs-built_in">export</span> DEBUG=azure:event-hubs:error,azure-amqp-common:error,rhea-promise:error,rhea:events,rhea:frames,rhea:io,rhea:flow</code></pre>
				<a href="#logging-to-a-file" id="logging-to-a-file" style="color: inherit; text-decoration: none;">
					<h3>Logging to a file</h3>
				</a>
				<ul>
					<li><p>Set the <code>DEBUG</code> environment variable as shown above and then run your test script as follows:</p>
						<ul>
							<li><p>Logging statements from your test script go to <code>out.log</code> and logging statements from the sdk go to <code>debug.log</code>.</p>
								<pre><code class="language-bash">node your-test-script.js &gt; out.log 2&gt;debug.log</code></pre>
							</li>
							<li><p>Logging statements from your test script and the sdk go to the same file <code>out.log</code> by redirecting stderr to stdout (&amp;1), and then redirect stdout to a file:</p>
								<pre><code class="language-bash">node your-test-script.js &gt;out.log 2&gt;&amp;1</code></pre>
							</li>
							<li><p>Logging statements from your test script and the sdk go to the same file <code>out.log</code>.</p>
								<pre><code class="language-bash">  node your-test-script.js &amp;&gt; out.log</code></pre>
							</li>
						</ul>
					</li>
				</ul>
				<a href="#next-steps" id="next-steps" style="color: inherit; text-decoration: none;">
					<h2>Next Steps</h2>
				</a>
				<p>Please take a look at the <a href="https://github.com/Azure/azure-sdk-for-js/tree/master/sdk/eventhub/event-hubs/samples">samples</a>
					directory for detailed examples on how to use this library to send and receive events to/from
				<a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-about">Event Hubs</a>.</p>
				<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
					<h2>Contributing</h2>
				</a>
				<p>If you&#39;d like to contribute to this library, please read the <a href="../../../CONTRIBUTING.md">contributing guide</a> to learn more about how to build and test the code.</p>
				<p><img src="https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-js/sdk/eventhub/event-hubs/README.png" alt="Impressions"></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/closereason.html" class="tsd-kind-icon">Close<wbr>Reason</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/eventdatabatch.html" class="tsd-kind-icon">Event<wbr>Data<wbr>Batch</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/eventhubclient.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Client</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/eventhubconsumer.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Consumer</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/eventhubproducer.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Producer</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/eventposition.html" class="tsd-kind-icon">Event<wbr>Position</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/eventprocessor.html" class="tsd-kind-icon">Event<wbr>Processor</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/inmemorypartitionmanager.html" class="tsd-kind-icon">In<wbr>Memory<wbr>Partition<wbr>Manager</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/partitionloadbalancer.html" class="tsd-kind-icon">Partition<wbr>Load<wbr>Balancer</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/partitionprocessor.html" class="tsd-kind-icon">Partition<wbr>Processor</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/partitionpump.html" class="tsd-kind-icon">Partition<wbr>Pump</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/receivehandler.html" class="tsd-kind-icon">Receive<wbr>Handler</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/batchoptions.html" class="tsd-kind-icon">Batch<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/checkpoint.html" class="tsd-kind-icon">Checkpoint</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventdata.html" class="tsd-kind-icon">Event<wbr>Data</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventhubclientoptions.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Client<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventhubconsumeroptions.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Consumer<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventhubproduceroptions.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Producer<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventhubproperties.html" class="tsd-kind-icon">Event<wbr>Hub<wbr>Properties</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventiteratoroptions.html" class="tsd-kind-icon">Event<wbr>Iterator<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/eventprocessoroptions.html" class="tsd-kind-icon">Event<wbr>Processor<wbr>Options</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/lastenqueuedeventinfo.html" class="tsd-kind-icon">Last<wbr>Enqueued<wbr>Event<wbr>Info</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/partitionmanager.html" class="tsd-kind-icon">Partition<wbr>Manager</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/partitionownership.html" class="tsd-kind-icon">Partition<wbr>Ownership</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/partitionproperties.html" class="tsd-kind-icon">Partition<wbr>Properties</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/receivedeventdata.html" class="tsd-kind-icon">Received<wbr>Event<wbr>Data</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/sendoptions.html" class="tsd-kind-icon">Send<wbr>Options</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#onabort" class="tsd-kind-icon">On<wbr>Abort</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#onerror" class="tsd-kind-icon">On<wbr>Error</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="globals.html#onmessage" class="tsd-kind-icon">On<wbr>Message</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#getretryattempttimeoutinms" class="tsd-kind-icon">get<wbr>Retry<wbr>Attempt<wbr>Timeout<wbr>InMs</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>